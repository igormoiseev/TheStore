@model IEnumerable<TheStore.Web.Domain.Category>
@if (Model != null)
{
    foreach (var category in Model.Where(x => x.ParentCategoryId == null).OrderBy(x => x.SequenceNumber))
    {
        if (category.Categories.Any())
        {
            <li class="dropdown">
                <a href="@Url.Action("Index", "Category", new { categoryUrl = category.CategoryUrl })" class="dropdown-toggle" data-toggle="dropdown">@category.Name <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    @foreach (var childCategory in category.Categories.OrderBy(x => x.Name))
                    {
                        <li>
                            <a href="@Url.Action("Index", "Category", new { categoryUrl = childCategory.CategoryUrl })">@childCategory.Name</a>
                        </li>
                    }
                </ul>
            </li>
        }
        else
        {
            <li><a href="@Url.Action("Index", "Category", new { categoryUrl = category.CategoryUrl })">@category.Name</a></li>
        }
    }
}
@if (User.Identity.IsAuthenticated && User.IsInRole("Administrator"))
{
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Управление <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
                @Html.ActionLink("Заказы", "Manage", "Order")
            </li>
            <li class="divider"></li>
            <li>
                @Html.ActionLink("Категории", "Manage", "Category")
            </li>
            <li>
                @Html.ActionLink("Характеристики", "Manage", "Characteristic")
            </li>
            <li>
                @Html.ActionLink("Опции", "Manage", "Option")
            </li>
            <li>
                @Html.ActionLink("Производители", "Manage", "Brand")
            </li>
            <li class="divider"></li>
            <li>
                @Html.ActionLink("Товары", "Manage", "Product")
            </li>
        </ul>
    </li>
}
